<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë‚˜ë§Œì˜ ì˜ì–´ë‹¨ì–´ í€´ì¦ˆ</title>
  <meta name="theme-color" content="#ffffff">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f7f7f7;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button, select {
      font-size: 18px;
      padding: 10px;
      width: 100%;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid #aaa;
      box-sizing: border-box;
    }
    button {
      background: #4a8fff;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background: #3a7fee;
    }
    .question {
      font-size: 22px;
      margin: 20px 0;
      font-weight: bold;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
      white-space: pre-line;
    }
    .progress {
      margin: 10px 0;
      font-size: 16px;
      color: #666;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>ğŸ“˜ ë‚˜ë§Œì˜ ì˜ì–´ë‹¨ì–´ í€´ì¦ˆ</h2>

  <label>ë¬¸ì œ ìœ í˜• ì„ íƒ:</label>
  <select id="quizMode">
    <option value="mixed">í˜¼í•© (ì˜ì–´+í•œê¸€)</option>
    <option value="korean">í•œê¸€ ëœ»ë§Œ ë§ì¶”ê¸° (ì˜ì–´â†’í•œê¸€)</option>
    <option value="english">ì˜ì–´ ë‹¨ì–´ë§Œ ë§ì¶”ê¸° (í•œê¸€â†’ì˜ì–´)</option>
  </select>

  <label>ë¬¸ì œ ê°œìˆ˜ ì„ íƒ (ìµœëŒ€ 50):</label>
  <select id="quizCount">
    <option value="10">10ê°œ</option>
    <option value="20">20ê°œ</option>
    <option value="30">30ê°œ</option>
    <option value="40">40ê°œ</option>
    <option value="50">50ê°œ</option>
  </select>

  <button onclick="startQuiz()">í€´ì¦ˆ ì‹œì‘</button>

  <div id="quizArea" style="display:none;">
    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <button onclick="speakWord()" id="speakBtn" style="background: #28a745; margin-bottom: 10px;">
      ğŸ”Š ë°œìŒ ë“£ê¸°
    </button>
    <input id="answerInput" placeholder="ì •ë‹µ ì…ë ¥..." onkeypress="handleKeyPress(event)" />
    <button onclick="checkAnswer()">ì œì¶œ</button>
    <div class="result" id="result"></div>
    <button onclick="nextQuestion()" id="nextBtn" style="display:none;">ë‹¤ìŒ ë¬¸ì œ</button>
  </div>
</div>

<script>
// -----------------------------
// ì˜ë‹¨ì–´ ëª©ë¡ (ëª¨ë“  meaningì„ ë°°ì—´ë¡œ í†µì¼)
// -----------------------------
const WORDS = [
  { word:"a", meaning:["í•˜ë‚˜ì˜"] },
  { word:"about", meaning:["~ì— ëŒ€í•œ", "ì•½", "ê±°ì˜"] },
  { word:"above", meaning:["~ë³´ë‹¤ ìœ„ì—"] },
  { word:"academy", meaning:["í•™êµ"] },
  { word:"accent", meaning:["ë§ì”¨","ê°•ì„¸"] },
  { word:"accident", meaning:["ì‚¬ê³ ","ìš°ì—°"] },
  { word:"across", meaning:["ê±´ë„ˆì„œ","ê°€ë¡œì§ˆëŸ¬"] },
  { word:"act", meaning:["í–‰ë™í•˜ë‹¤","í–‰ë™"] },
  { word:"add", meaning:["ë”í•˜ë‹¤","ì²¨ê°€í•˜ë‹¤"] },
  { word:"address", meaning:["ì£¼ì†Œ","ì£¼ì†Œë¥¼ ì“°ë‹¤"] },
  { word:"adult", meaning:["ì„±ì¸"] },
  { word:"adventure", meaning:["ëª¨í—˜"] },
  { word:"advise", meaning:["ì¡°ì–¸í•˜ë‹¤"] },
  { word:"afraid", meaning:["ë‘ë ¤ì›Œí•˜ëŠ”","ê²ë‚´ëŠ”"] },
  { word:"after", meaning:["í›„ì—"] },
  { word:"afternoon", meaning:["ì˜¤í›„"] },
  { word:"again", meaning:["ë‹¤ì‹œ","í•œ ë²ˆ ë”"] },
  { word:"against", meaning:["~ì— ë°˜ëŒ€í•˜ì—¬"] },
  { word:"age", meaning:["ë‚˜ì´","ì—°ë ¹"] },
  { word:"ago", meaning:["ì „ì—"] },
  { word:"agree", meaning:["ë™ì˜í•˜ë‹¤"] },
  { word:"ahead", meaning:["ì•ìœ¼ë¡œ","ì•ì—"] },
  { word:"air", meaning:["ê³µê¸°"] },
  { word:"airplane", meaning:["ë¹„í–‰ê¸°"] },
  { word:"airline", meaning:["í•­ê³µì‚¬"] },
  { word:"airport", meaning:["ê³µí•­"] },
  { word:"all", meaning:["ëª¨ë“ ","ëª¨ë‘"] },
  { word:"almost", meaning:["ê±°ì˜"] },
  { word:"alone", meaning:["í˜¼ì","ì™¸ë¡œìš´"] },
  { word:"along", meaning:["~ì„ ë”°ë¼"] },
  { word:"aloud", meaning:["ì†Œë¦¬ ë‚´ì–´","í¬ê²Œ"] },
  { word:"already", meaning:["ì´ë¯¸","ë²Œì¨"] },
  { word:"alright", meaning:["ê´œì°®ì€"] },
  { word:"also", meaning:["ë˜í•œ","ê²Œë‹¤ê°€"] },
  { word:"always", meaning:["í•­ìƒ"] },
  { word:"am", meaning:["ì˜¤ì „"] },
  { word:"and", meaning:["ê·¸ë¦¬ê³ "] },
  { word:"angel", meaning:["ì²œì‚¬"] },
  { word:"anger", meaning:["ë¶„ë…¸"] },
  { word:"animal", meaning:["ë™ë¬¼"] },
  { word:"another", meaning:["ë˜ í•˜ë‚˜ì˜"] },
  { word:"answer", meaning:["ëŒ€ë‹µ","íšŒì‹ "] },
  { word:"ant", meaning:["ê°œë¯¸"] },
  { word:"any", meaning:["ì–´ëŠ","ì–´ë–¤"] },
  { word:"apple", meaning:["ì‚¬ê³¼"] },
  { word:"area", meaning:["ì§€ì—­","êµ¬ì—­"] },
  { word:"arm", meaning:["íŒ”"] },
  { word:"around", meaning:["ì•½","ë‘˜ë ˆì—"] },
  { word:"arrive", meaning:["ë„ì°©í•˜ë‹¤"] },
  { word:"art", meaning:["ë¯¸ìˆ "] },
  { word:"as", meaning:["~ì²˜ëŸ¼","~ë¡œì„œ"] },
  { word:"ask", meaning:["ë¬»ë‹¤","ìš”ì²­í•˜ë‹¤"] },
  { word:"at", meaning:["~ì—"] },
  { word:"aunt", meaning:["ê³ ëª¨","ì´ëª¨","ìˆ™ëª¨"] },
  { word:"away", meaning:["ë–¨ì–´ì ¸"] },
  { word:"baby", meaning:["ì•„ê¸°"] },
  { word:"back", meaning:["ë“±","í—ˆë¦¬","ë’¤ìª½ì˜"] },
  { word:"background", meaning:["ë°°ê²½"] },
  { word:"bad", meaning:["ë‚˜ìœ","ì•ˆì¢‹ì€"] },
  { word:"bake", meaning:["êµ½ë‹¤"] },
  { word:"ball", meaning:["ê³µ"] },
  { word:"balloon", meaning:["í’ì„ "] },
  { word:"band", meaning:["ë°´ë“œ","ë "] },
  { word:"bank", meaning:["ì€í–‰","ë‘‘"] },
  { word:"base", meaning:["ê¸°ì´ˆ","í† ëŒ€"] },
  { word:"baseball", meaning:["ì•¼êµ¬"] },
  { word:"basic", meaning:["ê¸°ì´ˆì ì¸","ê·¼ë³¸ì ì¸"] },
  { word:"basket", meaning:["ë°”êµ¬ë‹ˆ"] },
  { word:"basketball", meaning:["ë†êµ¬"] },
  { word:"bat", meaning:["ë°©ë§ì´"] },
  { word:"bath", meaning:["ìš•ì¡°"] },
  { word:"bathroom", meaning:["ìš•ì‹¤"] },
  { word:"battery", meaning:["ë°°í„°ë¦¬"] },
  { word:"battle", meaning:["ì „íˆ¬"] },
  { word:"be", meaning:["ìˆë‹¤","ì´ë‹¤"] },
  { word:"beach", meaning:["í•´ë³€"] },
  { word:"bean", meaning:["ì½©"] },
  { word:"bear", meaning:["ê³°","ì°¸ë‹¤","ê²¬ë””ë‹¤"] },
  { word:"beauty", meaning:["ì•„ë¦„ë‹¤ì›€"] },
  { word:"because", meaning:["~ë•Œë¬¸ì—"] },
  { word:"become", meaning:["~ì´ ë˜ë‹¤"] },
  { word:"bed", meaning:["ì¹¨ëŒ€"] },
  { word:"bedroom", meaning:["ì¹¨ì‹¤"] },
  { word:"bee", meaning:["ë²Œ"] },
  { word:"beef", meaning:["ì†Œê³ ê¸°"] },
  { word:"before", meaning:["ì „ì—"] },
  { word:"begin", meaning:["ì‹œì‘í•˜ë‹¤"] },
  { word:"behind", meaning:["ë’¤ì—"] },
  { word:"believe", meaning:["ë¯¿ë‹¤"] },
  { word:"bell", meaning:["ì¢…"] },
  { word:"below", meaning:["ì•„ë˜ì—"] },
  { word:"beside", meaning:["ì˜†ì—"] },
  { word:"between", meaning:["ì‚¬ì´ì—"] },
  { word:"bicycle", meaning:["ìì „ê±°"] },
  { word:"big", meaning:["í°"] },
  { word:"bill", meaning:["ê³„ì‚°ì„œ"] },
  { word:"bird", meaning:["ìƒˆ"] },
  { word:"birth", meaning:["íƒ„ìƒ"] },
  { word:"birthday", meaning:["ìƒì¼"] },
  { word:"bite", meaning:["ë¬¼ë‹¤"] }
];

let quizList = [];
let currentQuiz = null;
let currentIndex = 0;
let totalCount = 0;

// -----------------------------
// í€´ì¦ˆ ì‹œì‘
// -----------------------------
function startQuiz() {
  const count = Number(document.getElementById("quizCount").value);
  const mode = document.getElementById("quizMode").value;
  totalCount = count;

  // ë‹¨ì–´ ìˆ˜ ì²´í¬
  if (WORDS.length < count) {
    alert(`ë‹¨ì–´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ${WORDS.length}ê°œì˜ ë‹¨ì–´ë§Œ ìˆìŠµë‹ˆë‹¤.`);
    return;
  }

  // ë¦¬ìŠ¤íŠ¸ ì„ê¸°
  quizList = [...WORDS]
    .sort(() => Math.random() - 0.5)
    .slice(0, count)
    .map(item => {
      let isWordMode;
      
      // ë¬¸ì œ ìœ í˜•ì— ë”°ë¼ ì„¤ì •
      if (mode === "korean") {
        // í•œê¸€ ëœ»ë§Œ ë§ì¶”ê¸°: ì˜ì–´ ë‹¨ì–´ ì œì‹œ â†’ í•œê¸€ ë‹µ
        isWordMode = true;
      } else if (mode === "english") {
        // ì˜ì–´ ë‹¨ì–´ë§Œ ë§ì¶”ê¸°: í•œê¸€ ëœ» ì œì‹œ â†’ ì˜ì–´ ë‹µ
        isWordMode = false;
      } else {
        // í˜¼í•©: ëœë¤
        isWordMode = Math.random() < 0.5;
      }
      
      return {
        question: isWordMode ? item.word : item.meaning.join(", "),
        answerList: isWordMode ? item.meaning : [item.word],
        fullMeaning: item.meaning,
        originalWord: item.word,
        isWordMode: isWordMode
      };
    });

  currentIndex = 0;
  document.getElementById("quizArea").style.display = "block";
  document.getElementById("result").innerHTML = "";
  document.getElementById("nextBtn").style.display = "none";
  showQuestion();
}

// -----------------------------
// ë¬¸ì œ ì¶œë ¥
// -----------------------------
function showQuestion() {
  currentQuiz = quizList[currentIndex];
  document.getElementById("progress").textContent = 
    `ì§„í–‰: ${currentIndex + 1} / ${totalCount}`;
  document.getElementById("question").textContent =
    `ë¬¸ì œ ${currentIndex + 1}: ${currentQuiz.question}`;
  document.getElementById("answerInput").value = "";
  document.getElementById("result").innerHTML = "";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("answerInput").focus();
}

// -----------------------------
// ë‹µì•ˆ ì²´í¬
// -----------------------------
function checkAnswer() {
  const user = document.getElementById("answerInput").value.trim();
  if (!user) {
    alert("ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
    return;
  }

  const result = document.getElementById("result");

  // ì •ë‹µ ì¡°ê±´ (ë¶€ë¶„ì¼ì¹˜ í—ˆìš©)
  const isCorrect = currentQuiz.answerList.some(ans =>
    ans.toLowerCase().includes(user.toLowerCase()) || 
    user.toLowerCase().includes(ans.toLowerCase())
  );

  // ë§ì¶˜ ì‹¤ì œ ëœ»ë§Œ
  const matchedMeaning = currentQuiz.answerList.filter(ans =>
    ans.toLowerCase().includes(user.toLowerCase()) || 
    user.toLowerCase().includes(ans.toLowerCase())
  );

  // ì „ì²´ ëœ» ì¤‘ ë‚˜ë¨¸ì§€
  const otherMeanings = currentQuiz.fullMeaning.filter(
    m => !matchedMeaning.includes(m)
  );

  if (isCorrect) {
    result.innerHTML =
      `â­• <b>ì •ë‹µì…ë‹ˆë‹¤!</b><br>
      ì…ë ¥í•œ ë‹µ: ${user}<br>
      ë§ëŠ” ì •ë‹µ: ${matchedMeaning.join(", ")}<br>
      ${otherMeanings.length > 0 ? `ë‹¤ë¥¸ ëœ»ë“¤: ${otherMeanings.join(", ")}` : ''}`;
  } else {
    result.innerHTML =
      `âŒ <b>ì˜¤ë‹µì…ë‹ˆë‹¤.</b><br>
      ì…ë ¥í•œ ë‹µ: ${user}<br>
      ì •ë‹µ: ${currentQuiz.answerList.join(", ")}<br>
      ì „ì²´ ëœ»: ${currentQuiz.fullMeaning.join(", ")}`;
  }

  // ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
  document.getElementById("nextBtn").style.display = "block";
}

// -----------------------------
// ë‹¤ìŒ ë¬¸ì œ
// -----------------------------
function nextQuestion() {
  currentIndex++;
  if (currentIndex >= quizList.length) {
    alert("í€´ì¦ˆ ì™„ë£Œ! ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!");
    document.getElementById("quizArea").style.display = "none";
    return;
  }
  showQuestion();
}

// -----------------------------
// ìŒì„± ë°œìŒ (ì˜ì–´ ë‹¨ì–´ë§Œ)
// -----------------------------
function speakWord() {
  // í˜„ì¬ ë¬¸ì œê°€ ì˜ì–´ ë‹¨ì–´ì¸ ê²½ìš°ì—ë§Œ ë°œìŒ
  if (!currentQuiz) return;
  
  let textToSpeak = "";
  
  // ì˜ì–´ ë‹¨ì–´ë¥¼ ë¬¼ì–´ë³´ëŠ” ë¬¸ì œì¸ ê²½ìš° (í•œê¸€ ëœ» â†’ ì˜ì–´ ë‹µ)
  if (!currentQuiz.isWordMode) {
    textToSpeak = currentQuiz.originalWord;
  } 
  // í•œê¸€ ëœ»ì„ ë¬¼ì–´ë³´ëŠ” ë¬¸ì œì¸ ê²½ìš° (ì˜ì–´ ë‹¨ì–´ â†’ í•œê¸€ ë‹µ)
  else {
    textToSpeak = currentQuiz.originalWord;
  }
  
  // ìŒì„± í•©ì„±
  const utterance = new SpeechSynthesisUtterance(textToSpeak);
  utterance.lang = 'en-US'; // ì˜ì–´ ë°œìŒ
  utterance.rate = 0.8; // ì†ë„ (0.8 = ì¡°ê¸ˆ ëŠë¦¬ê²Œ)
  
  // ë°œìŒ ì‹¤í–‰
  window.speechSynthesis.cancel(); // ì´ì „ ìŒì„± ì·¨ì†Œ
  window.speechSynthesis.speak(utterance);
}

// -----------------------------
// ì—”í„°í‚¤ë¡œ ì œì¶œ
// -----------------------------
function handleKeyPress(event) {
  if (event.key === "Enter") {
    const nextBtn = document.getElementById("nextBtn");
    if (nextBtn.style.display === "none") {
      checkAnswer();
    } else {
      nextQuestion();
    }
  }
}
</script>
</body>
</html>